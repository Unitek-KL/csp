<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>SERCOMx_SPI_TransferSetup Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '04420.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="03214.html" target="topic">Peripheral Library Overview</a> &gt; <a href="02834.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03213.html" target="topic">Peripheral Libraries</a> &gt; <a href="04369.html" target="topic">SERCOM Peripheral Library Help</a> &gt; <a href="04370.html" target="topic">SPI</a> &gt; <a href="04375.html" target="topic">Library Interface</a> &gt; b) Setup Functions &gt; <a href="04420.html" target="topic">SERCOMx_SPI_TransferSetup Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03214.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="04416.html" target="topic">Previous</a> | <a href="04375.html" target="topic">Up</a> | <a href="04419.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: sercom_u2201_spi::SERCOMx_SPI_TransferSetup@SPIx_TRANSFER_SETUP *@uint32_t Topic Title: SERCOMx_SPI_TransferSetup Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
SERCOMx_SPI_TransferSetup Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This function allows the application to change the SERCOM SPI operational parameter at run time. The application can thus override the MHC defined configuration for these parameters. The parameter are specified via the SPI_TRANSFER_SETUP type setup parameter. Each member of this parameter should be initialized to the desired value.&nbsp;</p>
<p class="Element10">
The application may feel need to call this function in situation where multiple SPI slaves, each with different operation parameters, are connected to one SPI master. This function can thus be used to setup the SPI Master to meet the communication needs of the slave.&nbsp;</p>
<p class="Element10">
Calling this function will affect any ongoing communication. The application must thus ensure that there is no on-going communication on the SPI before calling this function.</p></div>
</div>
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">bool</span></strong> <strong><span style="color: #000000">SERCOMx_SPI_TransferSetup</span></strong>(
    <a href="04435.html" target="topic">SPIx_TRANSFER_SETUP</a> * <strong><span style="color: #000000">setup</span></strong>, 
    uint32_t <strong><span style="color: #000000">spiSourceClock</span></strong>
);</pre></div></div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
SERCOM x SPI must first be initialized using <a href="04417.html" target="topic">SERCOMx_SPI_Initialize</a>().</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
setup&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to the data structure of type <a href="04435.html" target="topic">SPIx_TRANSFER_SETUP</a> containing the operation parameters. Each operation parameter must be specified even if the parameter does not need to change.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
spiSourceClock&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Current value of GCLK frequency feeding the SERCOMx core.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">

<ul class="Element630">
<li class="Element600">true - setup was successful.</li>
<li class="Element600">false - if spiSourceClock and SPI clock frequencies are such that resultant baud value is out of the possible range.</li>
</ul></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The application would need to call this function only if the operational parameter need to be different than the ones configured in MHC.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element13"><div class="Element12"><pre class="Element12">    <a href="04435.html" target="topic">SPIx_TRANSFER_SETUP</a> setup;
    setup.clockFrequency = 1000000;
    setup.clockPhase = SPI_CLOCK_PHASE_TRAILING_EDGE;
    setup.clockPolarity = SPI_CLOCK_POLARITY_IDLE_LOW;
    setup.dataBits = SPI_DATA_BITS_8;

    <i><span style="color: #008000">// Assuming 20 MHz as peripheral Master clock frequency</span></i>
    <strong><span style="color: #000080">if</span></strong> (SERCOM1_SPI_TransferSetup (&amp;setup, 20000000) == <strong><span style="color: #000080">false</span></strong>)
    {
        <i><span style="color: #008000">// this means setup could not be done, debug the reason.</span></i>
    }
</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="03214.html" target="topic">Peripheral Library Overview</a> &gt; <a href="02834.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03213.html" target="topic">Peripheral Libraries</a> &gt; <a href="04369.html" target="topic">SERCOM Peripheral Library Help</a> &gt; <a href="04370.html" target="topic">SPI</a> &gt; <a href="04375.html" target="topic">Library Interface</a> &gt; b) Setup Functions &gt; <a href="04420.html" target="topic">SERCOMx_SPI_TransferSetup Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03214.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="04416.html" target="topic">Previous</a> | <a href="04375.html" target="topic">Up</a> | <a href="04419.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: sercom_u2201_spi::SERCOMx_SPI_TransferSetup@SPIx_TRANSFER_SETUP *@uint32_t Topic Title: SERCOMx_SPI_TransferSetup Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>