<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>NVMCTRL_PageWrite Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '02521.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="03143.html" target="topic">Peripheral Library Overview</a> &gt; <a href="02763.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03142.html" target="topic">Peripheral Libraries</a> &gt; <a href="02489.html" target="topic">NVMCTRL Peripheral Library Help</a> &gt; <a href="02490.html" target="topic">Library Interface</a> &gt; c) Transaction Functions &gt; <a href="02521.html" target="topic">NVMCTRL_PageWrite Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03143.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="02524.html" target="topic">Previous</a> | <a href="02490.html" target="topic">Up</a> | <a href="02527.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: nvmctrl_u2207::NVMCTRL_PageWrite@uint32_t*@uint32_t Topic Title: NVMCTRL_PageWrite Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
NVMCTRL_PageWrite Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This function will write one page of data to the NVM address specified by the address parameter. The size of the input buffer should be one NVM page. The address should be aligned on a page boundary. Calling this function will cause the CPU execution to stall, hence blocking execution of any other thread. Execution resumes when the Write operation has completed. If the interrupt operation was enabled and if a callback was registered, then the callback function will be called. The <a href="02520.html" target="topic">NVMCTRL_IsBusy</a>() function can be used to poll for completion of the operation. The application should ensure that there are no other operations in progress before calling this function.&nbsp;</p>
<p class="Element10">
Once the operation is complete, the <a href="02514.html" target="topic">NVMCTRL_ErrorGet</a>() function can be called to check operation success.</p></div>
</div>
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">bool</span></strong> <strong><span style="color: #000000">NVMCTRL_PageWrite</span></strong>(
    uint32_t* <strong><span style="color: #000000">data</span></strong>, 
    uint32_t <strong><span style="color: #000000">address</span></strong>
);</pre></div></div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The <a href="02519.html" target="topic">NVMCTRL_Initialize</a>() function should have been called once. Also validate if NVM controller is ready to accept a new request by calling <a href="02520.html" target="topic">NVMCTRL_IsBusy</a>(). A row containing the page should be erased before the page can be written.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
address&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
start address of page to be written. This should be aligned on a page boundary.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
data&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to data buffer. The size of this buffer should be the same as the page size.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
Always return true.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function will clear any existing module errors before initiating the operation.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element13"><div class="Element12"><pre class="Element12">
<i><span style="color: #008000">// This code snippet shows how the NVMCTRL_PageWrite function is called and</span></i>
<i><span style="color: #008000">// how the NVMCTRL_IsBusy function is used to poll for completion.</span></i>

<a href="02519.html" target="topic">NVMCTRL_Initialize</a>();

<i><span style="color: #008000">// Erase the row. This will erase all the pages in the row.</span></i>
<a href="02525.html" target="topic">NVMCTRL_RowErase</a>(0x00030000);
<strong><span style="color: #000080">while</span></strong>(<a href="02520.html" target="topic">NVMCTRL_IsBusy</a>());

<i><span style="color: #008000">// Now write the page.</span></i>
NVMCTRL_PageWrite( (uint32_t *)buffer, 0x00030000,);
<strong><span style="color: #000080">while</span></strong>(<a href="02520.html" target="topic">NVMCTRL_IsBusy</a>());

<strong><span style="color: #000080">if</span></strong>(<a href="02514.html" target="topic">NVMCTRL_ErrorGet</a>() == NVMCTRL_ERROR_NONE)
{
    <i><span style="color: #008000">// Operation was successful.</span></i>
}
</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="03143.html" target="topic">Peripheral Library Overview</a> &gt; <a href="02763.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03142.html" target="topic">Peripheral Libraries</a> &gt; <a href="02489.html" target="topic">NVMCTRL Peripheral Library Help</a> &gt; <a href="02490.html" target="topic">Library Interface</a> &gt; c) Transaction Functions &gt; <a href="02521.html" target="topic">NVMCTRL_PageWrite Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03143.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="02524.html" target="topic">Previous</a> | <a href="02490.html" target="topic">Up</a> | <a href="02527.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: nvmctrl_u2207::NVMCTRL_PageWrite@uint32_t*@uint32_t Topic Title: NVMCTRL_PageWrite Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>