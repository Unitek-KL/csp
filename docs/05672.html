<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>Using the Library</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '05672.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="03831.html" target="topic">Peripheral Library Overview</a> &gt; <a href="03423.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03830.html" target="topic">Peripheral Libraries</a> &gt; <a href="05684.html" target="topic">TC Peripheral Library Help</a> &gt; <a href="05663.html" target="topic">Capture</a> &gt; <a href="05672.html" target="topic">Using the Library</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03831.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="05664.html" target="topic">Previous</a> | <a href="05663.html" target="topic">Up</a> | <a href="05666.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TC U2249 Capture Using the Library Topic Title: Using the Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Using the Library</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Capture trigger can be provided by</p>
<ul class="Element630">
<li class="Element600">asynchronous IO pin WO[x] for each capture channel
<ul class="Element631">
<li class="Element601">Capture channel captures the counter value in CCBUFx register when rising edge is detected on the IO pin.</li>
<li class="Element601">Capture can be triggered on falling edge by inverting the input signal.</li>
</ul></li>
<li class="Element600">Input event line TC_EV
<ul class="Element631">
<li class="Element601">Only one event input line is available</li>
<li class="Element601">This provides different capture event actions:
<ul class="Element632">
<li class="Element602">Timestamp</li>
<li class="Element602">Pulse width in CC0 and period in CC1</li>
<li class="Element602">Pulse width in CC1 and period in CC0</li>
<li class="Element602">Pulse width</li>
</ul></li>
</ul></li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
It provides both polling and callback methods to indicate capture event has occurred.</p>
<ul class="Element630">
<li class="Element600">With polling, the application will need to continuously poll to check if the capture event has occurred.</li>
<li class="Element600">With callback, the registered callback function will be called when the capture event occurs. This means the application do not have to poll continuously.</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Callback method</strong>&nbsp;</p>
<p class="Element10">
This example demonstrates how to use TC in capture mode to measure on time and period. CC0 captures on time and CC1 captures period of the input event. Event action is configured as PWP (Pulse width in CC0 and period in CC1)&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element13"><div class="Element12"><pre class="Element12"><i><span style="color: #008000">/* This function is called after Capture 0 interrupt */</span></i>
<strong><span style="color: #000080">void</span></strong> TC3_CaptureInterruptHandler(uintptr_t context)
{
    <i><span style="color: #008000">/* Read Captured values */</span></i>
    on_time = TC3_Capture16bitChannel0Get();
    period = TC3_Capture16bitChannel1Get();
}

<strong><span style="color: #000080">int</span></strong> main(<strong><span style="color: #000080">void</span></strong>)
{

    <i><span style="color: #008000">/* Register callback function for period interrupt */</span></i>
    TC3_CaptureCallbackRegister(TC3_CaptureInterruptHandler, (uintptr_t)NULL);

    <i><span style="color: #008000">/* Start the Capture */</span></i>
    TC3_CaptureStart();
}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="03831.html" target="topic">Peripheral Library Overview</a> &gt; <a href="03423.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03830.html" target="topic">Peripheral Libraries</a> &gt; <a href="05684.html" target="topic">TC Peripheral Library Help</a> &gt; <a href="05663.html" target="topic">Capture</a> &gt; <a href="05672.html" target="topic">Using the Library</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03831.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="05664.html" target="topic">Previous</a> | <a href="05663.html" target="topic">Up</a> | <a href="05666.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TC U2249 Capture Using the Library Topic Title: Using the Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>